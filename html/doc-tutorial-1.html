<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Drush Rush: Tutorial - How to Create a Drush Rush Job</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="surfboard.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Drush Rush
   </div>
   <div id="projectbrief">Drush tools to enhance and improve Drupal development operations and work flow.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial - How to Create a Drush Rush Job </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#page-tutorial-1">Tutorial - How to Create a Drush Rush Job   </a><ul><li class="level2"><a href="#sec-goal">1. Identify the Goal of the Build and the Steps to Accomplish the Goal</a></li>
<li class="level2"><a href="#sec-write">2. Write the Drush Rush Job</a></li>
<li class="level2"><a href="#sec-check">3.  Check the Job</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>How to build Drush Rush jobs.</p>
<h1><a class="anchor" id="page-tutorial-1"></a>
Tutorial - How to Create a Drush Rush Job   </h1>
<h2><a class="anchor" id="sec-goal"></a>
1. Identify the Goal of the Build and the Steps to Accomplish the Goal</h2>
<p>A good start for using Drush Rush is to identify what you would like accomplish and what the steps are to accomplish your goal.</p>
<p>Let's say you want to start a new Drupal website and put it under version control before you start working on it.</p>
<p>Let's call this goal "Init Site".</p>
<p>The steps to accomplish your "Init Site" goal might include:</p>
<ol type="1">
<li>Run <code>drush make</code> to build your codebase. (Or download and unzip the codebase and each module you want to start with.)</li>
<li>Go to the directory of the codebase <code>drush make</code> built.</li>
<li>Run <code>drush site-install</code> to install the Drupal site.</li>
<li>Run <code>git init</code> to put the build under version control.</li>
</ol>
<p>Now these steps are not hard to do and are not that many. But what if you find yourself doing these steps more than a few times a week? What if you could shrink these steps down to one step and then not have to think about the other steps again?</p>
<p>Let's turn the tasks for the goal "Init Site" into a single command called: </p>
<pre class="fragment">drush rush InitSite
</pre><p>In the next section we will create a Drush Rush job for "Init Site" goal.</p>
<h2><a class="anchor" id="sec-write"></a>
2. Write the Drush Rush Job</h2>
<h3>The General Steps to Create a Drush Rush Job</h3>
<p>There are three steps involved in creating any new Drush Rush job:</p>
<ol type="1">
<li>Create a job folder and give it a job name.</li>
<li>Write a rush file with operations that match the steps needed to accomplish your goal.</li>
<li>Optionally, write a params file to add custom variables to your build job.</li>
</ol>
<h3>Let's Write the InitSite Job</h3>
<h4>1. Create the Job Folder</h4>
<p>For a typical Drush Rush setup, the Rush Application jobs folder will be located here <code>~/Rush/jobs</code> .</p>
<p>Make a directory in the Rush jobs folder and name it: <code>InitSite</code></p>
<p><b>Note:</b> The name of a Rush job directory may not contain spaces or a period.</p>
<h4>Write the Rush File</h4>
<p>See the section titled, 'File Types' on the [[Key Terminology|Key Terminology]] page. Add a text file named <code>rush.ini</code> to the <code>InitSite</code> job folder.</p>
<p>The rush file should be located here: <code>~/Rush/jobs/InitSite/rush.ini</code></p>
<p>Open the rush file in a text editor and add the following text: </p>
<pre class="fragment">[f] = create_build_directory
[f] = make
[f] = si
[f] = git_init
</pre><p>Each of the lines above defines a command for Drush Rush to run when building your job.</p>
<p>The 'f' in the syntax <code>[f]</code> tells Drush Rush to execute a function.</p>
<p>In the first line above, the syntax <code>[f] = create_build_directory</code> tells Drush Rush to execute a function which the <code>create_build_directory</code> operation maps to.</p>
<p>The syntax <code>[f] = make</code> tells Drush Rush to go to the build directory and run Drush make. Drush Rush will look for a make file specified in your job's params.ini file if you have one, a make file within your job folder if you have one, and then in your <code>environment</code> directory.</p>
<p>The syntax <code>[f] = si</code> tells Drush Rush to go to the directory of the codebase that <code>drush make</code> just built and then run <code>drush site-install</code> to install the Drupal site.</p>
<p>Lastly, the syntax <code>[f] = git_init</code> tells Drush Rush to go to the top level of the build directory and initialize a git repository to put the build under version control.</p>
<p>See Rush Operations</p>
<h2><a class="anchor" id="sec-check"></a>
3.  Check the Job</h2>
<p>This step is optional. It defines a few ways to inspect your job's parameters and operations before you run it.</p>
<p>The following command lists the Drush Rush jobs within your Rush Application folder. </p>
<pre class="fragment">drush rush-list
</pre><p>When you run it you should see something like this: </p>
<pre class="fragment">**********JOBS LIST********************************************

InitSite

**********END LIST********************************************
</pre><p>The output should contain the name of your new job.</p>
<p>If you do not see your job in the list see {#sec-create-app-directory} and {#sec-application-folder} for information about setting up your Rush Application folder.</p>
<p>Run the following command to see the list of operations your job will execute when run. </p>
<pre class="fragment">drush rush InitSite --show=ops
</pre><p>You should see the following output: </p>
<pre class="fragment">********** OPERATIONS ********************************************

Array
(
    [0] =&gt; Array
        (
            [f] =&gt; create_build_directory
        )

    [1] =&gt; Array
        (
            [f] =&gt; make
        )

    [2] =&gt; Array
        (
            [f] =&gt; si
        )

    [3] =&gt; Array
        (
            [f] =&gt; git_init
        )

)


********** END OPERATIONS ********************************************
</pre><p>The operations listed in the array output will match the operations within your <code>rush.ini</code> file. </p>
<pre class="fragment">********** PATHS ********************************************

Array
(
    [build_paths] =&gt; Array
        (
            [root_directory_path] =&gt; /Users/mac_user/Sites/
            [directory_path] =&gt; /Users/mac_user/Sites/initsite_dev/
            [docroot_path] =&gt; /Users/mac_user/Sites/initsite_dev/docroot/
        )
</pre><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Complete writing about inspecting the parameters and running the drush rush job.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Write about setting up a global params file and a job params file.</dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 13 2013 12:57:29 for Drush Rush by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
